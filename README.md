<details>
<summary>ğŸ‡¹ğŸ‡¼ é»æ“Šå±•é–‹ï¼æ”¶èµ·ç¹é«”ä¸­æ–‡èªªæ˜</summary>

# Setsuna Discord æ©Ÿå™¨äºº

ä¸€å€‹èƒ½é€£æ¥ LLM API ä¸¦åœ¨æŒ‡å®šé »é“èˆ‡ç”¨æˆ¶èŠå¤©çš„ Discord AI æ©Ÿå™¨äººã€‚

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¤– æ™ºèƒ½å°è©±
- é€£æ¥ Discord ä¸¦åœ¨è¨­å®šçš„é »é“å›æ‡‰è¨Šæ¯
- é€éåˆ†æé »é“è¨Šæ¯æ­·å²ï¼Œæä¾›æœ‰è„ˆçµ¡çš„å›è¦†
- èƒ½å¤ è­˜åˆ¥ç”¨æˆ¶æŒ‡å®šå›è¦†çš„è¨Šæ¯ï¼Œä¸¦é‡å°å›è¦†å…§å®¹åšå‡ºç›¸æ‡‰å›æ‡‰
- æ”¯æ´é•·å°è©±è¨˜æ†¶ï¼Œå¯è¨˜ä½é »é“ä¸­æœ€è¿‘çš„50å‰‡å°è©±
- å¯è¨­å®šå€‹æ€§åŒ–å›è¦†é¢¨æ ¼ï¼Œè®“æ©Ÿå™¨äººåœ¨ä¸åŒé »é“å±•ç¾ä¸åŒæ€§æ ¼

### ğŸ”Œ å¤šæ¨¡å‹æ”¯æ´
- æ•´åˆå¤šç¨® LLM APIï¼ˆGroqã€Geminiã€ChatGPTã€Together AIã€DeepSeekã€Cerebrasï¼‰
- å¯åœ¨å•Ÿç”¨é »é“æ™‚é¸æ“‡ä½¿ç”¨çš„æ¨¡å‹
- æ”¯æ´é¸æ“‡ç‰¹å®šçš„ Groq æ¨¡å‹ï¼ˆ12ç¨®ï¼‰å’Œ Cerebras æ¨¡å‹ï¼ˆ4ç¨®ï¼‰
- å¯éš¨æ™‚åˆ‡æ›é »é“ä½¿ç”¨çš„æ¨¡å‹
- æ¨¡å‹åå¥½æŒä¹…åŒ–ä¿å­˜ï¼Œé‡å•Ÿå¾Œä¸æœƒéºå¤±

### ğŸ¨ åœ–ç‰‡ç”Ÿæˆèˆ‡ç†è§£
- æ”¯æ´æ ¹æ“šæ–‡å­—æè¿°ç”Ÿæˆåœ–ç‰‡
- æ”¯æ´ AI æ™ºèƒ½åˆ¤å®šç•«åœ–è«‹æ±‚ï¼ˆå¯é€é `/setsuna aidetect` æŒ‡ä»¤é–‹å•Ÿ/é—œé–‰ï¼‰
- å¯è­˜åˆ¥ç”¨æˆ¶ä¸Šå‚³çš„åœ–ç‰‡å…§å®¹
- æ”¯æ´åœ–ç‰‡é¢¨æ ¼è½‰æ›ï¼ˆå¦‚ï¼šæ²¹ç•«é¢¨æ ¼ã€åƒç´ é¢¨æ ¼ã€å¢åŠ /æ¸›å°‘ç•«é¢ä¸Šçš„ç‰©ä»¶ç­‰ï¼‰
- å¯æ ¹æ“šåœ–ç‰‡é€²è¡Œå•ç­”ï¼ˆå¦‚ï¼šåœ–ç‰‡ä¸­æœ‰å¹¾éš»è²“ï¼Ÿï¼‰

### ğŸ“º YouTube å½±ç‰‡ç†è§£
- å¯è§£æ YouTube å½±ç‰‡é€£çµï¼Œé¡¯ç¤ºå½±ç‰‡æ¨™é¡Œã€é »é“å’Œç°¡ä»‹
- æ”¯æ´ YouTube å½±ç‰‡å…§å®¹æ‘˜è¦
- å¯æ ¹æ“šå½±ç‰‡å…§å®¹é€²è¡Œå•ç­”
- æ”¯æ´ YouTube å½±ç‰‡æœå°‹åŠŸèƒ½

### âš™ï¸ é€²éšåŠŸèƒ½
- æ”¯æ´ç°¡å–®çš„é »é“å•Ÿç”¨ï¼åœç”¨æŒ‡ä»¤
- å¯è‡ªè¨‚ç¾©æ©Ÿå™¨äººäººè¨­
- å¤š API Key è¼ªæ›æ©Ÿåˆ¶ï¼Œç¢ºä¿æœå‹™ç©©å®šæ€§
- é »é“è¨­å®šå’Œæ¨¡å‹åå¥½æŒä¹…åŒ–ä¿å­˜åˆ° GitHub

## é‚€è«‹ Setsuna
ä½ å¯ä»¥ç”¨ä»¥ä¸‹é€£çµé‚€è«‹ Setsuna åˆ°ä½ çš„ Discord ä¼ºæœå™¨ï¼š
[é‚€è«‹ Setsuna åˆ°ä½ çš„ Discord ä¼ºæœå™¨](https://discord.com/oauth2/authorize?client_id=1372437324595462206&permissions=1689917160152128&integration_type=0&scope=applications.commands+bot)

ä¼ºæœå™¨è¨­å®šæ•™å­¸è«‹åƒè€ƒä¸‹æ–¹[ä½¿ç”¨æ–¹æ³•](https://github.com/breadMSA/setsuna-discord-bot?tab=readme-ov-file#ä½¿ç”¨æ–¹æ³•)ã€‚

## å®‰è£æ­¥é©Ÿ

### æœ¬åœ°é–‹ç™¼

1. è¤‡è£½æœ¬å°ˆæ¡ˆ
2. å®‰è£ä¾è³´ï¼š
   ```
   npm install
   ```
3. å»ºç«‹ `.env` æª”æ¡ˆä¸¦å¡«å…¥ API é‡‘é‘°ï¼š
   ```
   DISCORD_TOKEN=ä½ çš„ Discord bot token
   GEMINI_API_KEY=ä½ çš„ Gemini API é‡‘é‘°
   DEEPSEEK_API_KEY=ä½ çš„ DeepSeek API é‡‘é‘°
   CHATGPT_API_KEY=ä½ çš„ ChatGPT API é‡‘é‘°
   GROQ_API_KEY=ä½ çš„ Groq API é‡‘é‘°
   YOUTUBE_API_KEY=ä½ çš„ YouTube API é‡‘é‘° (ç”¨æ–¼ YouTube å½±ç‰‡æœå°‹å’Œ URL é è¦½åŠŸèƒ½)
   BOT_OWNER_ID=ä½ çš„Discordç”¨æˆ¶ID,å…¶ä»–ç®¡ç†å“¡ID (éå¿…è¦ï¼Œä½†è‹¥æ¬²ä½¿ç”¨/setprofileæŒ‡ä»¤å‰‡é ˆå¡«å¯«ã€‚è‹¥æœ‰å¤šå€‹ï¼Œè«‹ç”¨é€—è™Ÿéš”é–‹ï¼Œä¾‹å¦‚ï¼š123456789012345678,987654321098765432)
   TOGETHER_API_KEY=ä½ çš„ Together AI API é‡‘é‘°
   CEREBRAS_API_KEY=ä½ çš„ Cerebras API é‡‘é‘°
   GITHUB_REPO=ä½ çš„ GitHub å€‰åº«åç¨± (é€™æ˜¯ç”¨æ–¼å„²å­˜é »é“è¨­å®šå’Œæ¨¡å‹åå¥½ã€‚ç¯„ä¾‹ï¼šyourusername/yourrepository)
   GITHUB_TOKEN=ä½ çš„ GitHub Personal Access Token (PAT)
   CHARACTERAI_TOKEN=your_character_ai_token
   CHARACTERAI_CHARACTER_ID=your_character_id_here
   ```
4. å•Ÿå‹•æ©Ÿå™¨äººï¼š
   ```
   npm start
   ```

### GitHub éƒ¨ç½²

1. å»ºç«‹æ–°çš„ GitHub repository
2. æ¨é€ç¨‹å¼ç¢¼ï¼š
   ```
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/yourusername/setsuna-discord-bot.git
   git push -u origin main
   ```

## 24 å°æ™‚éƒ¨ç½²é¸é …

### é¸é … 1ï¼šRailway

[Railway](https://railway.app/) æä¾›ç°¡å–®çš„é›²ç«¯éƒ¨ç½²å¹³å°ï¼Œæœ‰å…è²»æ–¹æ¡ˆã€‚

1. è¨»å†Š Railway ä¸¦é€£æ¥ GitHub repository
2. åœ¨ Railway å¾Œå°æ–°å¢ç’°å¢ƒè®Šæ•¸
3. éƒ¨ç½²ä½ çš„æ‡‰ç”¨ç¨‹å¼

### é¸é … 2ï¼šRender

[Render](https://render.com/) æä¾›å…è²»çš„ Web æœå‹™ä¸»æ©Ÿã€‚

1. è¨»å†Š Render ä¸¦é€£æ¥ GitHub repository
2. å»ºç«‹æ–°çš„ Web Service
3. è¨­å®š build æŒ‡ä»¤ç‚º `npm install`
4. è¨­å®š start æŒ‡ä»¤ç‚º `node server.js & node index.js`
5. æ–°å¢ç’°å¢ƒè®Šæ•¸
6. éƒ¨ç½²ä½ çš„æ‡‰ç”¨ç¨‹å¼

### é¸é … 3ï¼šHeroku

[Heroku](https://www.heroku.com/) ä¹Ÿæ˜¯å¸¸è¦‹çš„ Discord bot é›²ç«¯ä¸»æ©Ÿã€‚

1. è¨»å†Š Heroku ä¸¦å®‰è£ Heroku CLI
2. åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `Procfile`ï¼Œå…§å®¹å¦‚ä¸‹ï¼š
   ```
   worker: npm start
   ```
3. éƒ¨ç½²åˆ° Herokuï¼š
   ```
   heroku create
   git push heroku main
   ```
4. åœ¨ Heroku å¾Œå°æ–°å¢ç’°å¢ƒè®Šæ•¸
5. å•Ÿå‹• workerï¼š
   ```
   heroku ps:scale worker=1
   ```

### é¸é … 4ï¼šGitHub Actions + è‡ªæ¶ Runner

å¦‚æœä½ æœ‰ 24 å°æ™‚é‹ä½œçš„ä¸»æ©Ÿï¼š

1. è¨­å®š GitHub Actions workflowï¼ˆ`.github/workflows/deploy.yml`ï¼‰ï¼š
   ```yaml
   name: Deploy Bot
   
   on:
     push:
       branches: [ main ]
   
   jobs:
     deploy:
       runs-on: self-hosted
       steps:
         - uses: actions/checkout@v2
         - name: Use Node.js
           uses: actions/setup-node@v2
           with:
             node-version: '16.x'
         - run: npm ci
         - run: pm2 restart setsuna || pm2 start index.js --name setsuna
   ```
2. åœ¨ä¸»æ©Ÿå®‰è£ PM2ï¼š`npm install -g pm2`
3. è¨­å®šè‡ªæ¶ GitHub Actions runner
4. æ¨é€åˆ° GitHub è§¸ç™¼éƒ¨ç½²

## ä½¿ç”¨æ–¹æ³•

æ©Ÿå™¨äººå•Ÿå‹•å¾Œï¼Œä½ å¯ä»¥åœ¨ Discord ä¼ºæœå™¨ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š

- `/setsuna activate #é »é“åç¨± [æ¨¡å‹] [groq_model/cerebras_model]` - åœ¨æŒ‡å®šé »é“å•Ÿç”¨æ©Ÿå™¨äººï¼Œå¯é¸æ“‡ä½¿ç”¨çš„æ¨¡å‹ï¼ˆGroqã€Geminiã€ChatGPTã€Together AIã€DeepSeekã€Cerebrasã€Character.AIï¼‰å’Œç‰¹å®šçš„å­æ¨¡å‹
- `/setsuna deactivate #é »é“åç¨±` - åœ¨æŒ‡å®šé »é“åœç”¨æ©Ÿå™¨äºº
- `/setsuna setmodel [æ¨¡å‹] [groq_model/cerebras_model] #é »é“åç¨±` - æ›´æ”¹æŒ‡å®šé »é“ä½¿ç”¨çš„æ¨¡å‹å’Œç‰¹å®šçš„å­æ¨¡å‹
- `/setsuna checkmodel #é »é“åç¨±` - æª¢æŸ¥é »é“ç•¶å‰ä½¿ç”¨çš„æ¨¡å‹
- `/setsuna aidetect [true/false]`ï¼šé–‹å•Ÿ/é—œé–‰ AI åˆ¤å®šç•«åœ–è«‹æ±‚åŠŸèƒ½ã€‚
- `/setsuna setpersonality` - è¨­å®šæ©Ÿå™¨äººäººè¨­ï¼Œè‡ªè¨‚æ©Ÿå™¨äººçš„å›è¦†é¢¨æ ¼å’Œå€‹æ€§
- `/setsuna checkpersonality` - æª¢æŸ¥ç•¶å‰æ©Ÿå™¨äººäººè¨­
- è‹¥ä¸æŒ‡å®š #é »é“åç¨±ï¼Œå‰‡é è¨­ç‚ºç•¶å‰é »é“
- è‹¥ä¸æŒ‡å®šæ¨¡å‹ï¼Œå‰‡é è¨­ä½¿ç”¨ Groq
- è‹¥é¸æ“‡ Groq ä½†ä¸æŒ‡å®š groq_modelï¼Œå‰‡é è¨­ä½¿ç”¨ llama-3.1-8b-instant
- `/reset_chat [channel]` - (éœ€æœ‰ç®¡ç†é »é“æ¬Šé™) é‡ç½®æŒ‡å®šæˆ–ç•¶å‰é »é“çš„èŠå¤©è¨˜éŒ„

- `/contact` - è¯çµ¡æ©Ÿå™¨äººé–‹ç™¼è€…æˆ–åŠ å…¥æˆ‘å€‘çš„ç¤¾ç¾¤ä¼ºæœå™¨æä¾›å›é¥‹ã€ç²å¾—æ”¯æ´
- `/help` - æŸ¥çœ‹æ©Ÿå™¨äººä½¿ç”¨èªªæ˜

### ğŸ’¬ èˆ‡ Setsuna èŠå¤©

- åœ¨ Setsuna å·²å•Ÿç”¨çš„é »é“ä¸­ç›´æ¥è¼¸å…¥è¨Šæ¯å³å¯é–‹å§‹èŠå¤©ã€‚
- Setsuna æœƒè¨˜ä½é »é“ä¸­æœ€è¿‘çš„ 50 å‰‡è¨Šæ¯ä»¥äº†è§£å°è©±è„ˆçµ¡ã€‚
- ä½ å¯ä»¥å›è¦† Setsuna æˆ–å…¶ä»–ç”¨æˆ¶çš„è¨Šæ¯ï¼ŒSetsuna èƒ½å¤ ç†è§£å›è¦†çš„ä¸Šä¸‹æ–‡ã€‚
- å¦‚æœä½ å‚³é€ YouTube å½±ç‰‡çš„ç¶²å€ï¼ŒSetsuna æœƒé¡¯ç¤ºå½±ç‰‡çš„é è¦½è³‡è¨Šã€‚
- å¦‚æœä½ è«‹ Setsuna å¹«å¿™æ‰¾ YouTube å½±ç‰‡ (ä¾‹å¦‚ï¼šã€Œå¹«æˆ‘æ‰¾è²“å’ªçš„å½±ç‰‡ã€)ï¼ŒSetsuna æœƒå˜—è©¦æœå°‹ä¸¦æä¾›ç›¸é—œçš„å½±ç‰‡é€£çµã€‚

## æˆæ¬Šæ¢æ¬¾

MIT

</details>

<details>
<summary>ğŸ‡ºğŸ‡¸ Click to expand/collapse English instructions</summary>

# Setsuna Discord Bot

A Discord AI bot that connects to LLM API and chats with users in specific channels.

## Features

### ğŸ¤– Intelligent Conversation
- Connects to Discord and responds to messages in configured channels
- Provides context-aware responses by analyzing channel message history
- Recognizes which messages users reply to, and responds accordingly to the reply context
- Supports long conversation memory, remembering the last 50 messages in a channel
- Allows customizable response styles to give the bot different personalities in different channels

### ğŸ”„ Multiple AI Models Support
- Supports multiple AI models:
  - Groq (various models including Llama 3.1, Llama 3.3, Gemma 2, etc.)
  - Gemini (Google's AI model)
  - ChatGPT (OpenAI's GPT models)
  - Together AI (Llama-3.3-70B-Instruct-Turbo)
  - DeepSeek (DeepSeek's AI models)
  - Cerebras (Llama 4 Scout/Maverick and other models)
  - Character.AI (Use any character from Character.AI)
- Allows different channels to use different models
- Automatically rotates between multiple API keys to avoid rate limits

### ğŸ¨ Image Generation and Manipulation
- Generates images based on text descriptions using Gemini
- Can modify existing images based on user requests
- Detects image generation and modification requests automatically

### ğŸ”§ Easy Administration
- Simple slash commands for bot management
- Automatic backup of channel configurations to GitHub
- Detailed logging for troubleshooting

## Setup

### Environment Variables
Create a `.env` file in the root directory with the following variables:

```
# Discord Bot Token
DISCORD_TOKEN=your_discord_bot_token

# API Keys (at least one is required)
DEEPSEEK_API_KEY=your_deepseek_api_key
GEMINI_API_KEY=your_gemini_api_key
CHATGPT_API_KEY=your_chatgpt_api_key
TOGETHER_API_KEY=your_together_api_key
GROQ_API_KEY=your_groq_api_key
CEREBRAS_API_KEY=your_cerebras_api_key
CHARACTERAI_TOKEN=your_character_ai_token

# Character.AI Character ID
CHARACTERAI_CHARACTER_ID=character_id_to_use

# GitHub Integration (optional, for configuration backup)
GITHUB_TOKEN=your_github_token
GITHUB_REPO=username/repo/path
```

You can have multiple API keys for each service by adding numbers to the environment variable names:
```
DEEPSEEK_API_KEY_2=your_second_deepseek_api_key
GEMINI_API_KEY_2=your_second_gemini_api_key
# etc.
```

### Installation

1. Clone this repository
2. Run `npm install` to install dependencies
3. Create a `.env` file with your API keys as described above
4. Run `node index.js` to start the bot

## Commands

- `/setsuna activate #channel-name [model] [groq_model/cerebras_model]` - Activate the bot in designated channel with optional model selection (Groq, Gemini, ChatGPT, Together AI, DeepSeek, Cerebras, Character.AI) and specific submodel.
- `/setsuna deactivate #channel-name` - Deactivate the bot in the designated channel.
- `/setsuna setmodel #channel-name [model] [groq_model/cerebras_model]` - Change the AI model used in the designated channel.
- `/setsuna checkmodel #channel-name` - Check which AI model is currently being used in the designated channel.
- `/setsuna setinstructions #channel-name [instructions]` - Set custom instructions for the AI in the designated channel.
- `/setsuna setrole #channel-name [role]` - Set a custom role for the AI in the designated channel.
- `/setsuna setstyle #channel-name [style]` - Set a custom speaking style for the AI in the designated channel.
- `/setsuna setstructure #channel-name [structure]` - Set a custom text structure for the AI in the designated channel.
- `/setsuna toggleimagedetection #channel-name` - Toggle AI-based image request detection in the designated channel.
- `/setsuna help` - Display help information about the bot commands.

## Character.AI Integration

The Character.AI integration allows you to use any character from Character.AI as a model in your bot. To use this feature:

1. Get your Character.AI token by logging into Character.AI and copying it from your browser's cookies
2. Set the `CHARACTERAI_TOKEN` environment variable with your token
3. Set the `CHARACTERAI_CHARACTER_ID` environment variable with the ID of the character you want to use
   - You can find the character ID in the URL when viewing a character on Character.AI
   - Example: For `https://beta.character.ai/chat?char=abcdefgh`, the ID is `abcdefgh`
4. Use `/setsuna activate #channel-name characterai` to activate the Character.AI model in a channel

The bot will create a new chat with the character and use it for all conversations in that channel.

## License

MIT

</details>
